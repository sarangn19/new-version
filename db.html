<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aspirant Dashboard</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="js/profile-manager.js"></script>
    <link href="styles/glassmorphism.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&family=Montserrat:wght@400&family=Roboto:wght@300&display=swap"
        rel="stylesheet">

    <style>
        /* Define custom colors and font families */
        :root {
            --bg-dark-1: #1F1F1F;
            /* Main Background */
            --bg-dark-2: #1A1A1A;
            /* Card/Sidebar Background */
            --teal-primary: #2C7A7B;
            /* Deep Teal for Revision Card and Primary Actions */
            --teal-secondary: #22543D;
            /* Slightly darker teal for gradient */
            --text-faded: rgba(255, 255, 255, 0.5);

            /* --- GLASSMORPHISM VARIABLES --- */
            --search-bg-glass: rgba(255, 255, 255, 0.02);
            --search-border-glass: rgba(255, 255, 255, 0.05);
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-dark-1);
        }

        .montserrat {
            font-family: 'Montserrat', sans-serif;
        }

        .roboto {
            font-family: 'Roboto', sans-serif;
        }

        /* Hide scrollbar */
        .scroll-hidden::-webkit-scrollbar {
            display: none;
        }

        .scroll-hidden {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* --- Custom Styles for Subtle Glassmorphism Search Bar --- */
        .glass-search-container {
            background-color: var(--search-bg-glass);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: 1px solid var(--search-border-glass);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .glass-search-container:focus-within {
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        /* --- UX ENHANCEMENT: Button Gradient & Microinteraction --- */
        .btn-primary-gradient {
            background: linear-gradient(135deg, var(--teal-primary) 0%, var(--teal-secondary) 100%);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }

        .btn-primary-gradient:hover {
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.6);
            transform: translateY(-2px);
            opacity: 0.95;
        }

        .btn-primary-gradient:active {
            transform: translateY(0);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }

        /* Secondary Button (Snooze/Outline style) */
        .btn-secondary-subtle {
            background-color: rgba(255, 255, 255, 0.1);
            transition: all 0.2s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
            /* Added border for consistency */
        }

        .btn-secondary-subtle:hover {
            background-color: rgba(255, 255, 255, 0.15);
            transform: translateY(-1px);
        }

        .btn-secondary-subtle:active {
            transform: translateY(0);
        }

        /* --- UX ENHANCEMENT: Content Card Hover Lift --- */
        .content-card-group {
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .content-card-group:hover {
            transform: translateY(-4px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.7);
        }

        /* Arrow Circle Button Style */
        .arrow-circle-button {
            width: 44px;
            height: 44px;
            background-color: var(--bg-dark-1);
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            flex-shrink: 0;
        }

        .arrow-circle-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* Toast Notification Styling */
        #toast-notification {
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            transform: translateY(100%);
        }

        #toast-notification.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Image specific styles for object fit and positioning */
        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        /* Flashcard specific styles for 3D flip */
        .perspective-1000 {
            perspective: 1000px;
        }

        .backface-hidden {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }

        /* Accessibility helpers */
        .sr-only {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            padding: 0 !important;
            margin: -1px !important;
            overflow: hidden !important;
            clip: rect(0, 0, 0, 0) !important;
            white-space: nowrap !important;
            border: 0 !important;
        }

        /* Make focused elements clearly visible */
        :focus-visible {
            outline: none;
            box-shadow: 0 0 0 3px rgba(44, 122, 123, 0.25);
            border-radius: 6px;
        }

        /* Unified button radius */
        :root {
            --btn-radius: 12px;
        }

        .btn-unified {
            border-radius: var(--btn-radius);
        }

        /* Slight background gradient for depth */
        body {
            background: linear-gradient(180deg, rgba(14, 18, 20, 1) 0%, rgba(23, 26, 28, 1) 40%);
        }

        /* Small text increased contrast and size */
        .text-small-strong {
            color: rgba(255, 255, 255, 0.88);
            font-size: 0.85rem;
        }

        /* Tighter content grouping */
        .content-grid-tight {
            gap: 8px;
        }

        button:focus-visible,
        a:focus-visible,
        input:focus-visible,
        textarea:focus-visible {
            outline: none;
            box-shadow: 0 0 0 3px rgba(44, 122, 123, 0.25);
            border-radius: 8px;
        }

        /* Remove teal focus ring for search input; the container shows focus instead */
        .glass-search-container input:focus-visible {
            outline: none !important;
            box-shadow: none !important;
        }

        /* Skip link visible on keyboard focus */
        .skip-link {
            position: absolute;
            top: 8px;
            left: 8px;
            background: #111;
            color: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            z-index: 10000;
            transform: translateY(-100%);
            transition: transform 0.18s ease-in-out;
        }

        .skip-link:focus,
        .skip-link:active {
            transform: translateY(0);
        }

        /* --- GLASSMORPHISM EFFECTS --- */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
        }

        .glass-sidebar {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* --- SMOOTH ANIMATIONS --- */
        .page-transition {
            animation: fadeInUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .nav-item {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .nav-item:hover::before {
            left: 100%;
        }

        .nav-item:hover {
            transform: translateX(4px);
            background: rgba(42, 42, 42, 0.8);
        }

        .nav-item.active {
            background: linear-gradient(135deg, rgba(44, 122, 123, 0.2), rgba(42, 42, 42, 0.9));
            border-left: 3px solid var(--teal-primary);
        }
    </style>
</head>

<body class="min-h-screen text-white antialiased scroll-hidden">

    <a href="#main-content" class="skip-link" data-skip-link>Skip to main content</a>

    <!-- Toast Notification -->
    <div id="toast-notification"
        class="fixed right-4 bottom-4 bg-gray-700/90 backdrop-blur-sm text-white px-5 py-2.5 rounded-xl shadow-2xl flex items-center space-x-2"
        role="status" aria-live="polite">
        <span id="toast-icon-container">
            <i id="toast-icon" data-lucide="info" class="w-5 h-5 text-green-400"></i>
        </span>
        <span id="toast-text" class="font-medium text-sm">System feedback goes here.</span>
        <!-- REDUCED from text-base -->
    </div>

    <!-- JavaScript for Logic and Interactivity -->
    <script>
        // --- MOCK DATA ---
        const contentData = [
            { id: 1, title: "Indian Polity", date: "7th Sept", description: "Indian polity refers to the political system of India which is based on the Constitution of India. Notes on Indian polity typically cover...", tag: "New", bookmarked: true, imageUrl: "image/polity.png" },
            { id: 2, title: "Modern History", date: "29th Sept", description: "Covering the arrival of Europeans, the struggle for independence, and post-independence consolidation...", tag: "Revision", bookmarked: false, imageUrl: "image/history.png" },
            { id: 3, title: "Environment & Ecology", date: "1st Oct", description: "Deals with biodiversity, climate change, pollution, and international environmental conventions...", tag: "Unattempted", bookmarked: true, imageUrl: "image/environment.png" },
            { id: 4, title: "Mock Test 1: Full Syllabus", date: "5th Oct", description: "A comprehensive mock test covering all major subjects to simulate exam conditions.", tag: "Mock Test", bookmarked: false, imageUrl: "image/mock-test.png" },
            { id: 5, title: "Geography Basics", date: "10th Oct", description: "Fundamental concepts of physical and human geography, including climate and resources.", tag: "Unattempted", bookmarked: false, imageUrl: "image/geography.png" },
            { id: 6, title: "Economic Survey Summary", date: "15th Oct", description: "Key highlights and analysis from the latest annual economic survey.", tag: "New", bookmarked: true, imageUrl: "image/economics.png" }
        ];

        const flashcards = [
            { id: 1, front: "What is the primary function of the Supreme Court of India?", back: "To uphold the Constitution and interpret its provisions (Judicial Review)." },
            { id: 2, front: "When was the Quit India Movement launched?", back: "August 8, 1942." },
            { id: 3, front: "Define carrying capacity in ecology.", back: "The maximum population size of a species that the environment can sustain indefinitely." }
        ];

        // Daily Challenge Data - AI Generated based on student performance
        const dailyChallenge = {
            mcqs: [
                {
                    id: 1,
                    question: "Which Constitutional Amendment is often referred to as a 'Mini-Constitution'?",
                    options: ["42nd Amendment", "44th Amendment", "52nd Amendment", "61st Amendment"],
                    answerIndex: 0,
                    explanation: "The 42nd Amendment (1976) introduced vast changes to the Constitution, drastically changing its structure and earning it the nickname 'Mini-Constitution'."
                },
                {
                    id: 2,
                    question: "Who was the first President of India?",
                    options: ["Dr. Rajendra Prasad", "Dr. S. Radhakrishnan", "Dr. Zakir Hussain", "V.V. Giri"],
                    answerIndex: 0,
                    explanation: "Dr. Rajendra Prasad was the first President of India, serving from 1950 to 1962."
                },
                {
                    id: 3,
                    question: "The Quit India Movement was launched in which year?",
                    options: ["1940", "1942", "1944", "1946"],
                    answerIndex: 1,
                    explanation: "The Quit India Movement was launched on August 8, 1942, by Mahatma Gandhi."
                },
                {
                    id: 4,
                    question: "Which article of the Constitution deals with Right to Education?",
                    options: ["Article 19", "Article 21", "Article 21A", "Article 22"],
                    answerIndex: 2,
                    explanation: "Article 21A provides free and compulsory education to children aged 6-14 years."
                },
                {
                    id: 5,
                    question: "The concept of 'Basic Structure' was established in which case?",
                    options: ["Golaknath Case", "Kesavananda Bharati Case", "Minerva Mills Case", "Maneka Gandhi Case"],
                    answerIndex: 1,
                    explanation: "The Basic Structure doctrine was established in Kesavananda Bharati v. State of Kerala (1973)."
                },
                {
                    id: 6,
                    question: "Which Five Year Plan focused on 'Growth with Social Justice'?",
                    options: ["Eighth Plan", "Ninth Plan", "Tenth Plan", "Eleventh Plan"],
                    answerIndex: 1,
                    explanation: "The Ninth Five Year Plan (1997-2002) had the theme 'Growth with Social Justice and Equity'."
                },
                {
                    id: 7,
                    question: "The National Green Tribunal was established in which year?",
                    options: ["2008", "2010", "2012", "2014"],
                    answerIndex: 1,
                    explanation: "The National Green Tribunal was established in 2010 under the National Green Tribunal Act, 2010."
                },
                {
                    id: 8,
                    question: "Which committee recommended the creation of Panchayati Raj institutions?",
                    options: ["Balwant Rai Mehta Committee", "Ashok Mehta Committee", "G.V.K. Rao Committee", "L.M. Singhvi Committee"],
                    answerIndex: 0,
                    explanation: "The Balwant Rai Mehta Committee (1957) recommended the establishment of Panchayati Raj institutions."
                },
                {
                    id: 9,
                    question: "The term 'Secular' was added to the Preamble by which amendment?",
                    options: ["42nd Amendment", "44th Amendment", "52nd Amendment", "61st Amendment"],
                    answerIndex: 0,
                    explanation: "The 42nd Amendment (1976) added 'Socialist' and 'Secular' to the Preamble."
                },
                {
                    id: 10,
                    question: "Which river is known as the 'Sorrow of Bengal'?",
                    options: ["Ganga", "Brahmaputra", "Damodar", "Hooghly"],
                    answerIndex: 2,
                    explanation: "The Damodar River was known as the 'Sorrow of Bengal' due to frequent floods before the construction of dams."
                }
            ],
            flashcards: [
                {
                    id: 1,
                    front: "What is the primary function of the Supreme Court of India?",
                    back: "To uphold the Constitution and interpret its provisions (Judicial Review)."
                },
                {
                    id: 2,
                    front: "When was the Quit India Movement launched?",
                    back: "August 8, 1942."
                },
                {
                    id: 3,
                    front: "Define carrying capacity in ecology.",
                    back: "The maximum population size of a species that the environment can sustain indefinitely."
                },
                {
                    id: 4,
                    front: "What is the tenure of a Lok Sabha member?",
                    back: "5 years from the date of its first meeting."
                },
                {
                    id: 5,
                    front: "Who appoints the Chief Justice of India?",
                    back: "The President of India appoints the CJI in consultation with judges of SC and HC."
                }
            ],
            currentMCQ: 0,
            currentFlashcard: 0
        };

        // --- GLOBAL STATE ---
        const skeletonCount = 4;
        let isLoading = true; // Controls content card display (skeleton vs real)
        let currentFilter = 'All'; // Active content filter

        let currentFlashcardIndex = 0;
        let flashcardFlipped = false;

        let selectedOptionIndex = null; // Quiz state
        let quizAttempted = false;
        let quizCorrect = false;

        // --- TOAST & UTILITIES ---
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast-notification');
            const toastText = document.getElementById('toast-text');
            const toastIconContainer = document.getElementById('toast-icon-container');

            toastText.textContent = message;
            toast.className = 'fixed right-4 bottom-4 px-5 py-2.5 rounded-xl shadow-2xl flex items-center space-x-2 transition-all duration-300';

            let iconName = 'info';
            let bgColor = 'bg-gray-700/90';
            let iconColor = 'text-teal-400';
            let iconSize = 'w-5 h-5';

            if (type === 'success') {
                iconName = 'check-circle';
                bgColor = 'bg-green-700/90';
                iconColor = 'text-white';
            } else if (type === 'error') {
                iconName = 'x-octagon';
                bgColor = 'bg-red-700/90';
                iconColor = 'text-white';
            }

            toast.classList.add(bgColor, 'text-white');

            // Recreate the icon element to update attributes correctly
            toastIconContainer.innerHTML = `<i id="toast-icon" data-lucide="${iconName}" class="${iconColor} ${iconSize}"></i>`;
            if (window.iconManager) window.iconManager.refresh();

            requestAnimationFrame(() => {
                toast.classList.add('show');
            });

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3500);
        }

        // --- CONTENT CARD LOGIC ---

        function toggleBookmark(id, btn) {
            const item = contentData.find(d => d.id === id);
            if (item) {
                item.bookmarked = !item.bookmarked;
                // Update button aria state if we have it
                if (btn) {
                    btn.setAttribute('aria-pressed', item.bookmarked ? 'true' : 'false');
                    const sr = btn.querySelector('.sr-only');
                    if (sr) sr.textContent = item.bookmarked ? `Remove bookmark for ${item.title}` : `Add bookmark for ${item.title}`;
                    // swap icon classes (simple approach: re-render icons after content update)
                }

                renderContent(currentFilter); // Re-render content list
                showToast(item.bookmarked ? `"${item.title}" bookmarked!` : `Bookmark removed from "${item.title}".`, 'info');
            }
        }

        function createContentCardHTML(item, isSkeleton = false) {
            if (isSkeleton) {
                return `
                    <div class="bg-[var(--bg-dark-2)] rounded-2xl overflow-hidden shadow-xl relative pb-6 animate-pulse">
                        <div class="h-32 rounded-t-2xl bg-gray-700"></div>
                        <div class="px-4 pt-4 space-y-2">
                            <div class="h-5 w-3/4 bg-gray-600 rounded"></div>
                            <div class="h-3 w-1/3 bg-gray-700 rounded"></div>
                            <div class="h-3 bg-gray-700 rounded"></div>
                            <div class="h-3 w-5/6 bg-gray-700 rounded"></div>
                            <div class="h-3 w-1/4 bg-gray-600 rounded mt-4"></div>
                        </div>
                        <div class="absolute top-3 right-3 w-8 h-8 rounded-full bg-gray-600"></div>
                        <div class="absolute bottom-6 right-6 w-12 h-12 rounded-full bg-gray-600"></div>
                    </div>
                `;
            }

            // Real card HTML with Bookmark
            const bookmarkIcon = item.bookmarked ? 'bookmark' : 'bookmark-plus';
            const bookmarkColor = item.bookmarked ? 'text-yellow-400 fill-yellow-400' : 'text-white/50';
            const tagColor = item.tag === 'Revision' ? 'text-red-400' : (item.tag === 'Mock Test' ? 'text-blue-400' : 'text-teal-400');


            return `
                <article class="content-card-group bg-[var(--bg-dark-2)] rounded-2xl overflow-hidden shadow-xl relative pb-6 transition duration-300 hover:shadow-2xl" aria-labelledby="content-title-${item.id}"> 
                    <div class="h-32 rounded-t-2xl border-b border-gray-700 overflow-hidden">
                        <img src="${item.imageUrl}" onerror="this.onerror=null; this.src='image/default-card.png';" alt="${item.title} illustration" class="card-image">
                    </div>

                    <div class="px-4 space-y-1 pt-3">
                        <div class="space-y-1">
                            <h4 id="content-title-${item.id}" class="text-sm font-normal leading-tight text-white">${item.title}</h4> <!-- REDUCED from text-[18px] -->
                            <p class="montserrat text-small-strong font-normal leading-4">Uploaded on ${item.date}</p> <!-- REDUCED from text-sm -->
                        </div>
                        <p class="roboto text-small-strong font-light leading-snug h-14 overflow-hidden" aria-hidden="true"> <!-- REDUCED from text-sm -->
                            ${item.description}
                        </p>
                        <ul class="mt-2 text-xs text-white/80 list-disc list-inside" aria-hidden="true">
                            <li class="truncate">Brief highlight or topic bullet 1</li>
                            <li class="truncate">Highlight or subtopic 2</li>
                        </ul>
                        <div class="pt-2">
                            <span class="font-medium text-sm leading-snug ${tagColor}" aria-label="Tag: ${item.tag}">${item.tag}</span> <!-- REDUCED from text-[18px] -->
                        </div>
                    </div>

                    <!-- Bookmark Button -->
                    <button onclick="toggleBookmark(${item.id}, this)" aria-pressed="${item.bookmarked ? 'true' : 'false'}" aria-label="${item.bookmarked ? 'Remove bookmark' : 'Add bookmark'} for ${item.title}" class="bookmark-btn absolute top-3 right-3 min-w-[44px] min-h-[44px] w-11 h-11 bg-[var(--bg-dark-1)] rounded-full flex items-center justify-center shadow-lg z-20 transition hover:bg-gray-700">
                        <span class="sr-only">${item.bookmarked ? 'Remove bookmark' : 'Add bookmark'} for ${item.title}</span>
                        <i data-lucide="${bookmarkIcon}" class="${bookmarkColor} w-5 h-5 transition duration-300" aria-hidden="true"></i>
                    </button>
                    
                    <!-- Arrow Button -->
                    <button aria-label="Open ${item.title}" class="absolute bottom-6 right-6 min-w-[44px] min-h-[44px] w-12 h-12 bg-[var(--bg-dark-1)] rounded-full flex items-center justify-center shadow-xl z-10 transition-all duration-300 group-hover:scale-110 group-hover:bg-gray-700">
                        <i data-lucide="arrow-right" class="text-white w-5 h-5 transition duration-300 group-hover:rotate-45" aria-hidden="true"></i>
                    </button>
                </article>
            `;
        }

        function renderContent() {
            const grid = document.getElementById('content-grid');
            grid.innerHTML = '';

            if (isLoading) {
                for (let i = 0; i < skeletonCount; i++) {
                    grid.innerHTML += createContentCardHTML(null, true);
                }
            } else {
                const filteredData = contentData.filter(item => {
                    if (currentFilter === 'All') return true;
                    if (currentFilter === 'Revision' && item.tag === 'Revision') return true;
                    if (currentFilter === 'Unattempted' && item.tag === 'Unattempted') return true;
                    if (currentFilter === 'Mock Test' && item.tag === 'Mock Test') return true;
                    if (currentFilter === 'Recent' && item.tag === 'New') return true;
                    // Add logic to filter by bookmarked if needed later
                    return false;
                });

                filteredData.forEach(item => {
                    grid.innerHTML += createContentCardHTML(item, false);
                });
                if (window.iconManager) window.iconManager.refresh(); // Re-render icons after adding content
            }
        }

        // --- FILTER CHIP LOGIC ---

        function setActiveFilter(filter) {
            currentFilter = filter;
            renderFilterChips();
            renderContent();
        }

        function renderFilterChips() {
            const chipsContainer = document.getElementById('filter-chips');
            const filters = ['All', 'Recent', 'Unattempted', 'Revision', 'Mock Test'];

            chipsContainer.innerHTML = filters.map(filter => {
                const isActive = filter === currentFilter;
                // Chip text size reduced to text-xs
                const classes = isActive
                    ? 'btn-primary-gradient px-3 py-1 text-xs font-medium rounded-full shadow-md transition' // REDUCED from px-4 py-1.5 text-sm
                    : 'bg-gray-700/70 border border-white/10 px-3 py-1 text-xs text-white/80 rounded-full transition hover:bg-gray-700'; // REDUCED from px-4 py-1.5 text-sm

                return `
                    <button onclick="setActiveFilter('${filter}')" class="${classes}">
                        ${filter}
                    </button>
                `;
            }).join('');
        }

        // --- FLASHCARD LOGIC ---

        function renderFlashcard() {
            const cardContainer = document.getElementById('flashcard-container');
            const card = dailyChallenge.flashcards[dailyChallenge.currentFlashcard];

            cardContainer.innerHTML = `
                <button id="card-inner" aria-pressed="${flashcardFlipped ? 'true' : 'false'}" aria-label="Flashcard: ${card.front}. Press Enter or Space to flip" 
                     onclick="flipFlashcard()" 
                     class="w-full h-full cursor-pointer transition-transform duration-500 rounded-lg shadow-xl 
                     bg-[var(--bg-dark-2)] p-4 flex items-center justify-center 
                     text-center border border-white/10 hover:border-teal-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-teal-400" 
                     style="transform-style: preserve-3d; ${flashcardFlipped ? 'transform: rotateY(180deg);' : 'transform: rotateY(0deg);'}">
                    
                    <!-- Front Face -->
                    <div id="card-front" class="absolute w-full h-full p-4 flex items-center justify-center backface-hidden">
                        <p class="text-xs font-light text-white/50 absolute bottom-2">Press Enter or Space to flip</p>
                        <p class="text-base font-semibold text-teal-400 pt-8">${card.front}</p> <!-- REDUCED from text-xl -->
                    </div>
                    
                    <!-- Back Face -->
                    <div id="card-back" class="absolute w-full h-full p-4 flex items-center justify-center backface-hidden" style="transform: rotateY(180deg);">
                        <p class="text-xs font-light text-white/80">${card.back}</p> <!-- REDUCED from text-sm -->
                    </div>
                </button>
            `;

            document.getElementById('flashcard-prev').disabled = dailyChallenge.currentFlashcard === 0;
            document.getElementById('flashcard-next').disabled = dailyChallenge.currentFlashcard === dailyChallenge.flashcards.length - 1;
        }

        function flipFlashcard() {
            flashcardFlipped = !flashcardFlipped;
            renderFlashcard();
        }

        function navigateFlashcard(direction) {
            flashcardFlipped = false; // Reset flip state
            if (direction === 'next' && dailyChallenge.currentFlashcard < dailyChallenge.flashcards.length - 1) {
                dailyChallenge.currentFlashcard++;
            } else if (direction === 'prev' && dailyChallenge.currentFlashcard > 0) {
                dailyChallenge.currentFlashcard--;
            }
            renderFlashcard();
        }

        function flashcardAction(action) {
            const card = dailyChallenge.flashcards[dailyChallenge.currentFlashcard];
            if (action === 'learned') {
                showToast(`Card on "${card.front.substring(0, 30)}..." marked as Learned!`, 'success');
                // In a real app, you'd remove this card from the active deck
            } else if (action === 'weak') {
                showToast(`Card on "${card.front.substring(0, 30)}..." flagged as Weak Area.`, 'error');
                // In a real app, you'd mark it for priority revision
            }
            // Move to next card (if not the last one)
            if (dailyChallenge.currentFlashcard < dailyChallenge.flashcards.length - 1) {
                navigateFlashcard('next');
            } else {
                showToast("End of Flashcards for today! Great job.", 'info');
            }
        }

        // --- DAILY QUIZ LOGIC ---

        function renderQuiz() {
            const optionsContainer = document.getElementById('quiz-options');
            const questionEl = document.getElementById('daily-quiz-question');
            const feedbackDiv = document.getElementById('quiz-feedback');
            const checkBtn = document.getElementById('check-answer-btn');
            const retryBtn = document.getElementById('retry-quiz-btn');
            const nextBtn = document.getElementById('next-question-btn');
            const questionCounter = document.getElementById('question-counter');

            // Populate the question text
            const currentMCQ = dailyChallenge.mcqs[dailyChallenge.currentMCQ];
            if (questionEl) questionEl.textContent = currentMCQ.question;
            if (questionCounter) questionCounter.textContent = `Question ${dailyChallenge.currentMCQ + 1} of ${dailyChallenge.mcqs.length}`;

            optionsContainer.innerHTML = currentMCQ.options.map((option, index) => {
                // Use role=radio buttons for accessibility
                let classes = 'p-3 rounded-xl cursor-pointer transition duration-200 text-white border border-white/10 inline-flex items-center w-full text-left';
                let ariaChecked = 'false';

                if (quizAttempted) {
                    if (index === currentMCQ.answerIndex) {
                        classes += ' bg-green-800/50 border-green-500 shadow-md';
                        ariaChecked = 'true';
                    } else if (index === selectedOptionIndex) {
                        classes += ' bg-red-800/50 border-red-500 shadow-md';
                        ariaChecked = 'true';
                    } else {
                        classes += ' bg-gray-700/50';
                    }
                } else {
                    classes += ' bg-gray-700/50 hover:bg-gray-600/70';
                    if (index === selectedOptionIndex) {
                        classes += ' border-teal-primary ring-2 ring-teal-primary shadow-lg';
                        ariaChecked = 'true';
                    }
                }

                return `
                    <button role="radio" tabindex="0" aria-checked="${ariaChecked}" class="${classes}" onclick="selectQuizOption(${index})" onkeydown="if(event.key==='Enter'||event.key===' '){ event.preventDefault(); selectQuizOption(${index}); }">
                        <span class="text-sm">${String.fromCharCode(65 + index)}. ${option}</span>
                    </button>
                `;
            }).join('');

            if (quizAttempted) {
                checkBtn.classList.add('hidden');
                if (dailyChallenge.currentMCQ < dailyChallenge.mcqs.length - 1) {
                    nextBtn.classList.remove('hidden');
                    retryBtn.classList.add('hidden');
                } else {
                    nextBtn.classList.add('hidden');
                    retryBtn.classList.remove('hidden');
                }
                feedbackDiv.classList.remove('hidden');
                feedbackDiv.innerHTML = `
                    <div class="p-3 rounded-lg ${quizCorrect ? 'bg-green-700/30 border-l-4 border-green-500' : 'bg-red-700/30 border-l-4 border-red-500'}">
                        <p class="text-xs font-medium ${quizCorrect ? 'text-green-400' : 'text-red-400'}"> <!-- REDUCED from text-sm -->
                            ${quizCorrect ? 'Correct! Excellent work.' : 'Incorrect.'}
                        </p>
                        <p class="text-xs text-white/70 pt-1">${currentMCQ.explanation}</p>
                    </div>
                `;
            } else {
                checkBtn.classList.remove('hidden');
                nextBtn.classList.add('hidden');
                retryBtn.classList.add('hidden');
                feedbackDiv.classList.add('hidden');
                checkBtn.disabled = selectedOptionIndex === null;
            }
        }

        function selectQuizOption(index) {
            if (quizAttempted) return;
            selectedOptionIndex = index;
            renderQuiz();
        }

        function checkQuizAnswer() {
            if (selectedOptionIndex === null) {
                showToast("Please select an option first!", 'error');
                return;
            }

            quizAttempted = true;
            quizCorrect = selectedOptionIndex === dailyChallenge.mcqs[dailyChallenge.currentMCQ].answerIndex;

            if (quizCorrect) {
                showToast("You nailed the daily challenge!", 'success');
            } else {
                showToast("Keep going, you'll get it next time.", 'info');
            }

            renderQuiz();
        }

        function nextQuestion() {
            if (dailyChallenge.currentMCQ < dailyChallenge.mcqs.length - 1) {
                dailyChallenge.currentMCQ++;
                quizAttempted = false;
                selectedOptionIndex = null;
                quizCorrect = false;
                renderQuiz();
            }
        }

        function resetQuiz() {
            dailyChallenge.currentMCQ = 0;
            quizAttempted = false;
            selectedOptionIndex = null;
            quizCorrect = false;
            showToast("Quiz reset. Good luck!", 'info');
            renderQuiz();
        }

        // --- DASHBOARD ACTIONS (from previous code) ---
        function handleSearch(event) {
            event.preventDefault();
            const searchInput = document.getElementById('search-input');
            const query = searchInput.value.trim();

            if (query) {
                console.log("Searching for:", query);
                showToast(`Searching for "${query}"...`, 'info');
                setTimeout(() => {
                    showToast(`Search for "${query}" completed.`, 'success');
                }, 1500);
            } else {
                showToast("Please enter a query.", 'error');
            }
        }

        function handleSnooze() {
            showToast("Revision snoozed! Reminder set for tomorrow.", 'success');
            console.log("Revision snoozed.");
        }

        function getInitials(fullName) {
            const names = fullName.split(' ');
            if (names.length === 1) return names[0].charAt(0).toUpperCase();
            if (names.length > 1) return (names[0].charAt(0) + names[names.length - 1].charAt(0)).toUpperCase();
            return 'A';
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Profile information is now handled by profile-manager.js
            
            // Load saved profile picture
            const savedDP = localStorage.getItem('selectedDP');
            const userInitialsEl = document.getElementById('user-initials');

            if (savedDP && userInitialsEl) {
                const parentDiv = userInitialsEl.parentElement;
                parentDiv.innerHTML = `<img src="image/${savedDP}.png" alt="Profile Picture" class="w-full h-full object-cover">`;
            } else if (userInitialsEl && window.profileManager) {
                userInitialsEl.textContent = profileManager.generateInitials(profileManager.profileData.name);
            }

            // Initial Render Calls
            renderContent(); // Show skeletons initially
            renderFilterChips();
            renderFlashcard();
            renderQuiz();

            // Simulate data fetching delay
            setTimeout(() => {
                isLoading = false;
                renderContent(); // Render real content
                showToast("Content successfully loaded.", 'success');
            }, 1500);

            // Notification functionality
            const notifications = [
                { id: 1, title: "New Daily Challenge Available", message: "Complete today's MCQ challenge to maintain your streak!", time: "2 minutes ago", type: "challenge", read: false },
                { id: 2, title: "Revision Reminder", message: "You have 3 topics due for revision today", time: "1 hour ago", type: "reminder", read: false },
                { id: 3, title: "New Content Added", message: "Modern History notes have been updated", time: "3 hours ago", type: "content", read: true },
                { id: 4, title: "Achievement Unlocked", message: "You've completed 50 flashcards this week!", time: "1 day ago", type: "achievement", read: true }
            ];

            function showNotificationsModal() {
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4';
                modal.innerHTML = `
                  <div class="bg-[var(--bg-dark-2)] rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-hidden border border-white/10">
                    <div class="flex items-center justify-between mb-6">
                      <h3 class="text-lg font-medium">Notifications</h3>
                      <div class="flex items-center gap-3">
                        <button id="markAllRead" class="text-sm text-[var(--teal-primary)] hover:text-[var(--teal-primary)]/80">Mark all as read</button>
                        <button id="closeNotificationsModal" class="text-white/50 hover:text-white">
                          <i data-lucide="x" class="w-5 h-5"></i>
                        </button>
                      </div>
                    </div>
                    <div class="overflow-y-auto max-h-[60vh] space-y-3">
                      ${notifications.map(notif => `
                        <div class="flex items-start gap-3 p-4 rounded-lg hover:bg-white/5 transition ${!notif.read ? 'bg-white/5 border-l-2 border-[var(--teal-primary)]' : ''}">
                          <div class="w-10 h-10 rounded-lg bg-[var(--teal-primary)]/20 flex items-center justify-center flex-shrink-0">
                            <i data-lucide="${notif.type === 'challenge' ? 'trophy' : notif.type === 'reminder' ? 'clock' : notif.type === 'content' ? 'file-plus' : 'award'}" class="w-5 h-5 text-[var(--teal-primary)]"></i>
                          </div>
                          <div class="flex-1 min-w-0">
                            <div class="flex items-start justify-between">
                              <h4 class="text-white font-medium text-sm">${notif.title}</h4>
                              ${!notif.read ? '<div class="w-2 h-2 bg-[var(--teal-primary)] rounded-full flex-shrink-0 mt-1"></div>' : ''}
                            </div>
                            <p class="text-white/70 text-sm mt-1">${notif.message}</p>
                            <p class="text-white/50 text-xs mt-2">${notif.time}</p>
                          </div>
                        </div>
                      `).join('')}
                    </div>
                  </div>
                `;

                document.body.appendChild(modal);

                modal.querySelector('#closeNotificationsModal').addEventListener('click', () => {
                    document.body.removeChild(modal);
                });

                modal.querySelector('#markAllRead').addEventListener('click', () => {
                    notifications.forEach(notif => notif.read = true);
                    document.body.removeChild(modal);
                    showToast('All notifications marked as read', 'success');
                });

                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        document.body.removeChild(modal);
                    }
                });

                if (window.lucide && typeof window.lucide.createIcons === 'function') {
                    window.if (window.iconManager) window.iconManager.refresh();
                }
            }

            // Add notification button event listener
            document.getElementById('notification-btn')?.addEventListener('click', () => {
                showNotificationsModal();
            });

            // Bookmark functionality - get from localStorage
            function getBookmarks() {
                const bookmarks = localStorage.getItem('userBookmarks');
                return bookmarks ? JSON.parse(bookmarks) : [
                    // Default bookmarks if none exist
                    { id: 1, title: "Indian Constitution - Fundamental Rights", type: "Note", date: "2 days ago" },
                    { id: 2, title: "Economic Survey 2024 - Key Points", type: "Note", date: "1 week ago" },
                    { id: 3, title: "Environment & Ecology Flashcards", type: "Flashcard", date: "3 days ago" },
                    { id: 4, title: "Polity MCQ Set 1", type: "MCQ", date: "5 days ago" },
                    { id: 5, title: "Modern History Timeline", type: "Note", date: "1 week ago" }
                ];
            }

            function saveBookmarks(bookmarks) {
                localStorage.setItem('userBookmarks', JSON.stringify(bookmarks));
            }

            function showBookmarksModal() {
                const bookmarkedContent = getBookmarks();
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4';
                modal.innerHTML = `
                  <div class="bg-[var(--bg-dark-2)] rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-hidden border border-white/10">
                    <div class="flex items-center justify-between mb-6">
                      <h3 class="text-lg font-medium">Bookmarked Content</h3>
                      <button id="closeBookmarksModal" class="text-white/50 hover:text-white">
                        <i data-lucide="x" class="w-5 h-5"></i>
                      </button>
                    </div>
                    <div class="overflow-y-auto max-h-[60vh]">
                      ${bookmarkedContent.length === 0 ?
                        '<div class="text-center py-8 text-white/60">No bookmarked content yet</div>' :
                        bookmarkedContent.map(item => `
                          <div class="flex items-center justify-between p-4 rounded-lg hover:bg-white/5 transition">
                            <div class="flex items-center gap-3">
                              <div class="w-10 h-10 rounded-lg bg-[var(--teal-primary)]/20 flex items-center justify-center">
                                <i data-lucide="${item.type === 'Note' ? 'file-text' : item.type === 'Flashcard' ? 'layers' : item.type === 'News' ? 'newspaper' : 'help-circle'}" class="w-5 h-5 text-[var(--teal-primary)]"></i>
                              </div>
                              <div>
                                <h4 class="text-white font-medium">${item.title}</h4>
                                <p class="text-white/60 text-sm">${item.type}${item.category ? ` (${item.category})` : ''} â€¢ ${item.date}</p>
                              </div>
                            </div>
                            <div class="flex items-center gap-2">
                              <button class="open-bookmark-btn p-2 rounded-lg hover:bg-white/10 transition cursor-pointer" title="Open" data-id="${item.id}">
                                <i data-lucide="external-link" class="w-4 h-4 text-white/60"></i>
                              </button>
                              <button class="remove-bookmark-btn p-2 rounded-lg hover:bg-red-500/20 transition cursor-pointer" title="Remove bookmark" data-id="${item.id}">
                                <i data-lucide="bookmark-x" class="w-4 h-4 text-red-400"></i>
                              </button>
                            </div>
                          </div>
                        `).join('')
                    }
                    </div>
                  </div>
                `;

                document.body.appendChild(modal);

                modal.querySelector('#closeBookmarksModal').addEventListener('click', () => {
                    document.body.removeChild(modal);
                });

                // Add click handlers for bookmark actions
                modal.querySelectorAll('.open-bookmark-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const itemId = parseInt(e.currentTarget.dataset.id);
                        const bookmarks = getBookmarks();
                        const item = bookmarks.find(bookmark => bookmark.id === itemId);
                        if (item) {
                            if (item.type === 'News') {
                                // Close bookmark modal and redirect to news page
                                document.body.removeChild(modal);
                                showToast(`Opening ${item.title}...`, 'info');
                                // If we're not on news page, redirect there with news ID
                                if (!window.location.href.includes('news.html')) {
                                    window.location.href = `news.html?openNews=${item.id}`;
                                } else {
                                    // If already on news page, just open the modal
                                    if (window.viewNews) {
                                        window.viewNews(item.id);
                                    }
                                }
                            } else {
                                showToast(`Opening ${item.title}...`, 'info');
                                // Here you could redirect to other content types
                            }
                        }
                    });
                });

                modal.querySelectorAll('.remove-bookmark-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const itemId = parseInt(e.currentTarget.dataset.id);
                        const bookmarks = getBookmarks();
                        const itemIndex = bookmarks.findIndex(item => item.id === itemId);
                        if (itemIndex > -1) {
                            const item = bookmarks[itemIndex];
                            bookmarks.splice(itemIndex, 1);
                            saveBookmarks(bookmarks);
                            showToast(`Removed "${item.title}" from bookmarks`, 'success');
                            document.body.removeChild(modal);
                            // Reopen modal with updated content
                            setTimeout(() => showBookmarksModal(), 100);
                        }
                    });
                });

                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        document.body.removeChild(modal);
                    }
                });

                if (window.lucide && typeof window.lucide.createIcons === 'function') {
                    window.if (window.iconManager) window.iconManager.refresh();
                }
            }

            // Add bookmark button event listener
            document.getElementById('bookmarks-btn')?.addEventListener('click', () => {
                showBookmarksModal();
            });

            // Render Lucide Icons
            if (window.iconManager) window.iconManager.refresh();
        });

    </script>

    <!-- MAIN APPLICATION CONTAINER -->
    <div class="flex flex-col lg:flex-row h-screen bg-[var(--bg-dark-1)]">

        <!-- SIDEBAR -->
        <aside id="sidebar"
            class="hidden lg:flex flex-col w-[280px] glass-sidebar p-8 pt-20 flex-shrink-0 overflow-y-auto scroll-hidden">

            <!-- Profile and Notifications -->
            <div class="flex items-center justify-between px-2 mb-10">
                <div class="flex items-center space-x-4">
                    <div class="relative"> <!-- wrapper to allow badge overflow -->
                        <a href="profile.html"
                            class="block w-12 h-12 rounded-full overflow-hidden bg-[#84D0F7] border-2 border-white/50 flex items-center justify-center hover:scale-105 transition-transform duration-200 cursor-pointer">
                            <div id="user-initials" class="text-lg font-medium text-black">A</div>
                        </a>
                        <!-- Notification badge overlay (positioned relative to wrapper) -->
                        <button id="notification-btn" aria-label="Notifications"
                            class="absolute -right-2 -top-2 w-8 h-8 bg-[var(--bg-dark-1)]/90 backdrop-blur-sm rounded-full flex items-center justify-center border border-white/10 shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-teal-500"
                            title="Notifications">
                            <span class="w-6 h-6 rounded-full bg-[#111111] flex items-center justify-center">
                                <i data-lucide="bell" class="text-white w-4 h-4"></i>
                            </span>
                        </button>
                    </div>
                    <div>
                        <div id="user-name" class="font-normal text-sm">Jane Doe</div>
                        <!-- REDUCED from text-base -->
                        <div id="user-email" class="font-light text-xs opacity-70">jane.doe@aspirant.com</div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="space-y-1.5 pt-10">
                <a href="db.html" class="nav-item active flex items-center space-x-5 px-8 py-2.5 rounded-full">
                    <i data-lucide="layout-dashboard" class="text-white w-5 h-5"></i>
                    <span class="font-normal text-sm">Dashboard</span>
                </a>
                <a href="learn.html" class="nav-item flex items-center space-x-5 px-8 py-2.5 rounded-full">
                    <i data-lucide="book-open" class="text-white opacity-50 w-5 h-5"></i>
                    <span class="font-normal text-sm text-white opacity-50">Learn</span>
                </a>
                <a href="statistics.html" class="nav-item flex items-center space-x-5 px-8 py-2.5 rounded-full">
                    <i data-lucide="bar-chart-2" class="text-white opacity-50 w-5 h-5"></i>
                    <span class="font-normal text-sm text-white opacity-50">Statistics</span>
                </a>
                <a href="news.html" class="nav-item flex items-center space-x-5 px-8 py-2.5 rounded-full">
                    <i data-lucide="newspaper" class="text-white opacity-50 w-5 h-5"></i>
                    <span class="font-normal text-sm text-white opacity-50">News</span>
                </a>
                <a href="chatbot.html" class="nav-item flex items-center space-x-5 px-8 py-2.5 rounded-full">
                    <div
                        class="w-6 h-6 bg-[#84D0F7] rounded-full flex items-center justify-center text-xs font-medium text-black flex-shrink-0">
                        AI</div>
                    <span class="font-normal text-sm text-white opacity-50">AI Assistant</span>
                </a>
            </nav>

            <!-- Bookmarks Section -->
            <div class="mt-8 pt-6 border-t border-white/10">
                <button id="bookmarks-btn"
                    class="nav-item flex items-center space-x-5 px-8 py-2.5 rounded-full w-full text-left">
                    <i data-lucide="bookmark" class="text-white opacity-50 w-5 h-5"></i>
                    <span class="font-normal text-sm text-white opacity-50">Bookmarks</span>
                </button>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main id="main-content" role="main" tabindex="-1"
            class="flex-1 p-6 lg:p-8 overflow-y-auto scroll-hidden page-transition">

            <!-- Search Bar -->
            <form onsubmit="handleSearch(event)"
                class="glass-search-container flex items-center rounded-[2.5rem] p-1.5 mb-6 w-full max-w-7xl mx-auto">
                <i data-lucide="search"
                    class="search-icon text-white/70 w-5 h-5 mx-4 flex-shrink-0 transition-colors duration-300"></i>
                <label for="search-input" class="sr-only">Search</label>
                <input type="text" id="search-input" aria-label="Search notes, flashcards, MCQs"
                    placeholder="Search notes, flashcards, MCQs..."
                    class="bg-transparent text-white placeholder-[var(--text-faded)] text-sm font-normal flex-grow focus:outline-none py-2"
                    autocomplete="off" />
                <div class="arrow-circle-button" onclick="handleSearch(event)">
                    <i data-lucide="arrow-right" class="text-white w-5 h-5"></i>
                </div>
            </form>

            <!-- Responsive Grid Layout: Content (Left) & Widgets (Right) -->
            <div class="lg:grid lg:grid-cols-[1fr_360px] lg:gap-8 w-full max-w-7xl mx-auto">

                <!-- LEFT COLUMN: Revision Card, Filters, and Content List -->
                <div class="space-y-6"> <!-- Reduced space-y -->

                    <!-- Revision Due Today Card -->
                    <div
                        class="bg-gradient-to-br from-[var(--teal-primary)] to-[var(--teal-secondary)] glass-card rounded-2xl flex flex-col sm:flex-row items-start sm:items-center justify-between overflow-hidden w-full shadow-2xl p-6 md:p-8 space-y-4 sm:space-y-0 hover:shadow-3xl transition-all duration-300 border border-white/10">
                        <div class="space-y-3"> <!-- Reduced space-y -->
                            <h2 class="text-xl font-medium text-white leading-tight">Revision Due Today</h2>
                            <!-- REDUCED from text-3xl -->
                            <p class="text-white/80 max-w-lg text-xs"> <!-- REDUCED from text-sm -->
                                You have critical topics flagged for revision based on the spaced repetition system.
                                Don't let your hard work slip!
                            </p>
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 pt-2">
                                <button
                                    class="btn-primary-gradient btn-unified w-fit px-5 py-1.5 text-white font-medium text-sm shadow-lg">
                                    <!-- REDUCED from text-base, reduced padding -->
                                    <i data-lucide="zap" class="w-4 h-4 mr-1 inline-block"></i> Start Now
                                </button>
                                <button onclick="handleSnooze()"
                                    class="btn-secondary-subtle btn-unified w-fit px-4 py-1.5 text-white font-normal text-sm flex items-center justify-center">
                                    <!-- REDUCED from text-base, reduced padding -->
                                    <i data-lucide="bell-off" class="w-4 h-4 mr-1"></i> Snooze (24 Hrs)
                                </button>
                            </div>
                        </div>
                        <div class="mt-4 sm:mt-0 flex-shrink-0 w-32 h-32 md:w-48 md:h-48">
                            <img src="image/revision illustration.png" alt="Revision Illustration"
                                class="w-full h-full object-contain rounded-lg">
                        </div>
                    </div>

                    <!-- Content Filter Chips -->
                    <div id="filter-chips" class="flex flex-wrap gap-2">
                        <!-- Chips rendered here by JS -->
                    </div>

                    <!-- Content List Grid -->
                    <h3 class="text-base font-semibold text-white pt-2">Admin Uploaded Content</h3>
                    <!-- REDUCED from text-xl -->
                    <div id="content-grid" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-2 content-grid-tight">
                        <!-- Reduced gap -->
                        <!-- Content Skeletons or Cards rendered here by JS -->
                    </div>
                </div>

                <!-- RIGHT COLUMN: Widgets (Quiz & Flashcards) -->
                <div class="mt-8 lg:mt-0 space-y-6">

                    <!-- Daily Quiz Widget (Consistent Card Style) -->
                    <div id="daily-quiz-widget"
                        class="bg-[var(--bg-dark-2)] rounded-2xl p-5 shadow-xl space-y-3 border border-white/10">
                        <!-- Reduced padding and space-y -->
                        <div class="flex items-center justify-between">
                            <h4 class="text-base font-semibold text-white flex items-center gap-2">
                                <!-- REDUCED from text-xl -->
                                Daily Challenge <i data-lucide="trophy" class="w-5 h-5 text-yellow-400"></i>
                            </h4>
                            <span id="question-counter" class="text-xs text-white/60">Question 1 of 10</span>
                        </div>
                        <p id="daily-quiz-question" class="text-white/80 font-normal leading-snug text-sm">
                            <!-- ADDED text-sm -->
                            <!-- Question will be populated by JS -->
                        </p>

                        <!-- Options List -->
                        <div id="quiz-options" class="space-y-2" role="radiogroup"
                            aria-labelledby="daily-quiz-question"> <!-- Reduced space-y -->
                            <!-- Options rendered by JS -->
                        </div>

                        <!-- Feedback & Actions -->
                        <div id="quiz-feedback" class="pt-2 hidden">
                            <!-- Feedback rendered by JS -->
                        </div>
                        <div id="quiz-actions" class="pt-3"> <!-- Reduced padding -->
                            <button id="check-answer-btn" onclick="checkQuizAnswer()"
                                class="btn-primary-gradient btn-unified w-full px-4 py-1.5 text-white font-medium text-sm">
                                <!-- REDUCED from text-base, reduced padding -->
                                Check Answer
                            </button>
                            <button id="next-question-btn" onclick="nextQuestion()"
                                class="btn-primary-gradient btn-unified w-full px-4 py-1.5 text-white font-medium text-sm hidden mt-2">
                                Next Question
                            </button>
                            <button id="retry-quiz-btn" onclick="resetQuiz()"
                                class="btn-secondary-subtle btn-unified w-full px-4 py-1.5 text-white font-medium text-sm hidden mt-2">
                                <!-- REDUCED from text-base, reduced padding, reduced mt -->
                                Restart Challenge
                            </button>
                        </div>
                    </div>

                    <!-- Flashcard Carousel (Consistent Card Style) -->
                    <div id="flashcard-carousel"
                        class="bg-[var(--bg-dark-2)] rounded-2xl p-5 shadow-xl space-y-3 border border-white/10">
                        <!-- Reduced padding and space-y -->
                        <h4 class="text-base font-semibold text-white flex items-center justify-between">
                            <!-- REDUCED from text-xl -->
                            Rapid Flashcards <i data-lucide="zap" class="w-5 h-5 text-red-400"></i>
                        </h4>

                        <!-- Flashcard Card Container (3D Flip) -->
                        <div id="flashcard-container"
                            class="relative h-40 flex items-center justify-center perspective-1000">
                            <!-- Card content goes here -->
                        </div>

                        <!-- Navigation Buttons (Using Consistent Button Styles) -->
                        <div class="flex justify-between space-x-3">
                            <button id="flashcard-prev" onclick="navigateFlashcard('prev')"
                                class="btn-secondary-subtle w-1/2 px-3 py-1.5 text-white rounded-xl text-sm disabled:opacity-30">
                                <!-- REDUCED from text-base, reduced padding -->
                                <i data-lucide="arrow-left" class="w-4 h-4 inline-block mr-1"></i> Back
                            </button>
                            <button id="flashcard-next" onclick="navigateFlashcard('next')"
                                class="btn-primary-gradient w-1/2 px-3 py-1.5 text-white font-medium rounded-xl text-sm disabled:opacity-30">
                                <!-- REDUCED from text-base, reduced padding -->
                                Next <i data-lucide="arrow-right" class="w-4 h-4 inline-block ml-1"></i>
                            </button>
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex justify-center space-x-3 pt-2">
                            <button onclick="flashcardAction('learned')"
                                class="text-xs font-medium text-green-400 hover:text-green-300 transition">
                                <i data-lucide="check-circle" class="w-4 h-4 mr-1 inline-block"></i> Mark as Learned
                            </button>
                            <span class="text-white/50">|</span>
                            <button onclick="flashcardAction('weak')"
                                class="text-xs font-medium text-red-400 hover:text-red-300 transition">
                                <i data-lucide="alert-triangle" class="w-4 h-4 mr-1 inline-block"></i> Weak Area
                            </button>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>
</body>

</html>